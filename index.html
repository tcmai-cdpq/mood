<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Mood Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .week-container {
            display: flex;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .day {
            flex: 1;
            padding: 15px;
            border-right: 1px solid #eee;
            text-align: center;
        }
        .day:last-child {
            border-right: none;
        }
        .day-header {
            font-weight: bold;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid #eee;
        }
        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin-top: 20px;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .emoji {
            font-size: 24px;
            cursor: pointer;
            padding: 10px;
            border-radius: 5px;
            transition: background-color 0.2s;
        }
        .emoji:hover {
            background-color: #f0f0f0;
        }
        .mood-entries {
            margin-top: 15px;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .mood-entry {
            background-color: #f9f9f9;
            padding: 10px;
            border-radius: 5px;
            font-size: 32px;
            position: relative;
        }
        .timestamp {
            font-size: 10px;
            color: #999;
            position: absolute;
            bottom: 2px;
            right: 5px;
        }
        /* Hidden field for tracking multiple checkins */
        .tcm-tracker {
            display: none;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Team Weekly Mood Tracker</h1>
        <p>Select an emoji to share how you're feeling today (anonymously)</p>
    </div>

    <div class="week-container">
        <div class="day" id="monday">
            <div class="day-header">Monday</div>
            <div class="mood-entries" id="monday-entries"></div>
        </div>
        <div class="day" id="tuesday">
            <div class="day-header">Tuesday</div>
            <div class="mood-entries" id="tuesday-entries"></div>
        </div>
        <div class="day" id="wednesday">
            <div class="day-header">Wednesday</div>
            <div class="mood-entries" id="wednesday-entries"></div>
        </div>
        <div class="day" id="thursday">
            <div class="day-header">Thursday</div>
            <div class="mood-entries" id="thursday-entries"></div>
        </div>
        <div class="day" id="friday">
            <div class="day-header">Friday</div>
            <div class="mood-entries" id="friday-entries"></div>
        </div>
    </div>

    <h2>How are you feeling today?</h2>
    <div class="emoji-grid" id="emoji-selector">
        <!-- Emojis will be loaded here via JavaScript -->
    </div>

    <!-- Hidden input for IP tracking -->
    <input type="hidden" id="userIP" name="userIP">
    <div class="tcm-tracker"></div>

    <script>
        // List of emojis to choose from
        const emojis = [
            "ðŸ˜€", "ðŸ˜ƒ", "ðŸ˜„", "ðŸ˜", "ðŸ˜†", "ðŸ˜…", "ðŸ¤£", "ðŸ˜‚", "ðŸ™‚", "ðŸ™ƒ", 
            "ðŸ˜‰", "ðŸ˜Š", "ðŸ˜‡", "ðŸ¥°", "ðŸ˜", "ðŸ¤©", "ðŸ˜˜", "ðŸ˜—", "ðŸ˜š", "ðŸ˜™",
            "ðŸ˜‹", "ðŸ˜›", "ðŸ˜œ", "ðŸ˜", "ðŸ¤‘", "ðŸ¤—", "ðŸ¤­", "ðŸ¤«", "ðŸ¤”", "ðŸ¤",
            "ðŸ¤¨", "ðŸ˜", "ðŸ˜‘", "ðŸ˜¶", "ðŸ˜", "ðŸ˜’", "ðŸ™„", "ðŸ˜¬", "ðŸ˜®â€ðŸ’¨", "ðŸ¤¥",
            "ðŸ˜Œ", "ðŸ˜”", "ðŸ˜ª", "ðŸ¤¤", "ðŸ˜´", "ðŸ˜·", "ðŸ¤’", "ðŸ¤•", "ðŸ¤¢", "ðŸ¤®",
            "ðŸ¤§", "ðŸ¥µ", "ðŸ¥¶", "ðŸ¥´", "ðŸ˜µ", "ðŸ˜µâ€ðŸ’«", "ðŸ¤¯", "ðŸ¤ ", "ðŸ¥³", "ðŸ˜Ž",
            "ðŸ¤“", "ðŸ§", "ðŸ˜•", "ðŸ˜Ÿ", "ðŸ™", "â˜¹ï¸", "ðŸ˜®", "ðŸ˜¯", "ðŸ˜²", "ðŸ˜³",
            "ðŸ¥º", "ðŸ˜¦", "ðŸ˜§", "ðŸ˜¨", "ðŸ˜°", "ðŸ˜¥", "ðŸ˜¢", "ðŸ˜­", "ðŸ˜±", "ðŸ˜–",
            "ðŸ˜£", "ðŸ˜ž", "ðŸ˜“", "ðŸ˜©", "ðŸ˜«", "ðŸ¥±", "ðŸ˜¤", "ðŸ˜¡", "ðŸ˜ ", "ðŸ¤¬",
            "ðŸ˜ˆ", "ðŸ‘¿", "ðŸ’€", "â˜ ï¸", "ðŸ’©", "ðŸ¤¡", "ðŸ‘¹", "ðŸ‘º", "ðŸ‘»", "ðŸ‘½",
            "ðŸ¤–", "ðŸ’ª", "ðŸ‘Š", "âœŒï¸", "ðŸ¤Ÿ", "ðŸ§ ", "ðŸ«€", "ðŸ§˜â€â™€ï¸", "ðŸƒâ€â™‚ï¸", "ðŸ’ƒ"
        ];
        
        // Current day of the week
        const days = ["sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday"];
        const currentDay = days[new Date().getDay()];
        
        // Load emojis onto the grid
        const emojiSelector = document.getElementById('emoji-selector');
        emojis.forEach(emoji => {
            const emojiElement = document.createElement('div');
            emojiElement.className = 'emoji';
            emojiElement.textContent = emoji;
            emojiElement.addEventListener('click', () => selectEmoji(emoji));
            emojiSelector.appendChild(emojiElement);
        });

        // Get user IP address
        async function getUserIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                document.getElementById('userIP').value = data.ip;
                return data.ip;
            } catch (error) {
                console.error('Error fetching IP:', error);
                return 'unknown';
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', async () => {
            await getUserIP();
            loadMoods();
            
            // Highlight current day
            if (document.getElementById(currentDay)) {
                document.getElementById(currentDay).style.backgroundColor = '#f0f8ff';
            }
        });

        // Select an emoji and save it
        async function selectEmoji(emoji) {
            const ip = document.getElementById('userIP').value || await getUserIP();
            const timestamp = new Date().toISOString();
            const day = currentDay;
            
            // In a real app, you'd send this to your server
            saveMood(ip, day, emoji, timestamp);
            
            // For this demo, we'll save to localStorage
            localStorage.setItem(`mood_${ip}_${day}`, JSON.stringify({
                emoji: emoji,
                timestamp: timestamp
            }));
            
            loadMoods();
        }

        // Mock function that would normally send data to your server
        function saveMood(ip, day, emoji, timestamp) {
            console.log(`Saving mood for IP ${ip} on ${day}: ${emoji} at ${timestamp}`);
            // In a real implementation, this would be an API call
            // fetch('/api/moods', {
            //     method: 'POST',
            //     headers: { 'Content-Type': 'application/json' },
            //     body: JSON.stringify({ ip, day, emoji, timestamp })
            // });
        }

        // Load and display moods from storage
        function loadMoods() {
            const ip = document.getElementById('userIP').value;
            
            days.forEach(day => {
                if (day === 'sunday' || day === 'saturday') return; // Skip weekend
                
                const entriesContainer = document.getElementById(`${day}-entries`);
                if (!entriesContainer) return;
                
                entriesContainer.innerHTML = '';
                
                // In a real app, you'd load all team entries from your server
                // For this demo, we'll just show the current user's mood
                const savedMood = localStorage.getItem(`mood_${ip}_${day}`);
                if (savedMood) {
                    const { emoji, timestamp } = JSON.parse(savedMood);
                    const entry = document.createElement('div');
                    entry.className = 'mood-entry';
                    entry.innerHTML = `${emoji}<span class="timestamp">${new Date(timestamp).toLocaleTimeString()}</span>`;
                    entriesContainer.appendChild(entry);
                }
            });
        }
    </script>
</body>
</html>
